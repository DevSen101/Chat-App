<!-- Bootstrap CSS for layout -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
 integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

<style>
 /* Style input fields */
 input {
  width: 100%;
  height: 35px;
 }

 /* Message list styling */
 #messages {
  list-style-type: none;
  margin: 0;
  padding: 0;
 }

 /* Padding for messages */
 #messages li {
  padding: 5px 10px;
 }

 /* Alternate background for odd messages */
 #messages li:nth-child(odd) {
  background-color: #eee;
 }
</style>

<!-- Chat UI -->
<div class="container">
 <div class="row">
  <div class="col-sm-12">
   <!-- Form for sending message -->
   <form action="" id="message-form">
    <div class="col-sm-10">
     <input type="text" id="user-message" placeholder="Enter your message" />
    </div>
    <div class="col-sm-2">
     <input type="submit" class="btn btn-primary" value="Send!">
    </div>
   </form>

   <!-- Message list -->
   <ul id="messages"></ul>
  </div>
 </div>
</div>

<!-- Socket.io client script -->
<script src="/socket.io/socket.io.js"></script>

<script>
 // Connect to socket.io server
 const socket = io('http://localhost:9000')

 // Listen for welcome message from server
 socket.on('messageFromServer', (dataFromServer) => {
  console.log(dataFromServer)
  // Respond to server (for testing)
  socket.emit('messageToServer', { data: "This is from the client" })
 })

 // Handle message form submission
 document.querySelector('#message-form').addEventListener('submit', (event) => {
  event.preventDefault() // Stop page reload
  const newMessage = document.querySelector('#user-message').value // Get input
  socket.emit('newMessageToServer', { text: newMessage }) // Send message to server
  document.querySelector('#user-message').value = '' // Clear input box
 })

 // Receive message from server and show on screen
 socket.on('messageToClients', (msg) => {
  document.querySelector('#messages').innerHTML += `<li>${msg.text}</li>`
 })
</script>